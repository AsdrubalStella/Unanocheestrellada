<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Abril y Luna</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a365d 0%, #3182ce 100%);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: flex;
        }
        
        .star {
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        
        .star:hover {
            transform: scale(1.2);
            filter: drop-shadow(0 0 10px yellow);
        }
        
        .shape {
            cursor: grab;
            transition: transform 0.2s ease;
            touch-action: none; /* Mejora para dispositivos táctiles */
        }
        
        .shape:hover {
            transform: scale(1.05);
        }
        
        .shape.dragging {
            opacity: 0.8;
            cursor: grabbing;
        }
        
        .target-area {
            transition: all 0.3s ease;
        }
        
        .target-area.highlight {
            filter: drop-shadow(0 0 8px white);
        }
        
        .target-area.correct {
            filter: drop-shadow(0 0 12px #4ade80);
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        .page-turn-inner {
            width: 100%;
        }
        
        .story-container {
            min-height: 250px;
        }
        
        .eagle-animation {
            animation: eagle-fly 8s ease-in-out infinite;
        }
        
        @keyframes eagle-fly {
            0% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(2deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(10px) rotate(-2deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }
        
        .fox-animation {
            animation: fox-move 6s ease-in-out infinite;
        }
        
        @keyframes fox-move {
            0% { transform: translateX(0); }
            50% { transform: translateX(20px); }
            100% { transform: translateX(0); }
        }
        
        .stone-glow {
            animation: glow 2s ease-in-out infinite;
        }
        
        @keyframes glow {
            0% { filter: drop-shadow(0 0 2px #A78BFA); }
            50% { filter: drop-shadow(0 0 8px #A78BFA); }
            100% { filter: drop-shadow(0 0 2px #A78BFA); }
        }
        
        .message-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            color: #1a365d;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            max-width: 80%;
            text-align: center;
            display: none;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 50%;
            animation: fall 3s ease-in-out forwards;
            pointer-events: none; /* Evita interferencias con clics */
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .breath-circle {
            transition: transform 0.5s ease, opacity 0.5s ease;
        }
        
        .breath-text {
            transition: opacity 0.3s ease;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
            transform-origin: center;
        }
        
        .info-button {
            background-color: #F59E0B;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .info-button:hover {
            background-color: #D97706;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(245, 158, 11, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(245, 158, 11, 0);
            }
        }
        
        /* Mejoras para dispositivos móviles */
        @media (max-width: 640px) {
            .story-container {
                flex-direction: column;
            }
            
            .story-container > div {
                width: 100% !important;
                padding-right: 0 !important;
                margin-bottom: 1rem;
            }
        }
        
        .activity-card {
            transition: all 0.3s ease;
        }
        
        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body>
    <div id="message-popup" class="message-popup">
        <h3 class="text-xl font-bold mb-2">Mensaje Estelar</h3>
        <p id="message-text" class="text-lg"></p>
        <button onclick="closeMessage()" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full">
            Cerrar
        </button>
    </div>

    <!-- Página de inicio -->
    <div class="page active flex flex-col items-center justify-center min-h-screen p-4" id="page-home">
        <div class="text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6 text-yellow-300">Abril y Luna</h1>
            <p class="text-xl mb-8">Un juego interactivo para niños pequeños</p>
            <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 justify-center">
                <button onclick="showPage('page-story')" class="bg-yellow-500 hover:bg-yellow-600 text-blue-900 font-bold py-3 px-6 rounded-full text-lg transition-all transform hover:scale-105">
                    Comenzar
                </button>
            </div>
            
            <!-- Botón de información -->
            <div class="mt-12">
                <a href="https://editorialemocionarte.systeme.io/33bd59d3" target="_blank" class="info-button text-white font-bold py-3 px-6 rounded-full text-lg inline-flex items-center pulse">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Para obtener más información de estas herramientas entra aquí
                </a>
            </div>
        </div>
        
        <!-- Estrellas flotantes -->
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <svg class="star floating absolute" style="top: 15%; left: 10%; animation-delay: 0s;" width="20" height="20" viewBox="0 0 24 24">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star floating absolute" style="top: 25%; left: 80%; animation-delay: 0.5s;" width="15" height="15" viewBox="0 0 24 24">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star floating absolute" style="top: 65%; left: 15%; animation-delay: 1s;" width="18" height="18" viewBox="0 0 24 24">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star floating absolute" style="top: 75%; left: 70%; animation-delay: 1.5s;" width="22" height="22" viewBox="0 0 24 24">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star floating absolute" style="top: 45%; left: 40%; animation-delay: 2s;" width="25" height="25" viewBox="0 0 24 24">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
        </div>
    </div>

    <!-- Página de menú - Eliminada -->

    <!-- Página de historia de Abril y Luna -->
    <div class="page flex flex-col items-center justify-between min-h-screen p-4 relative" id="page-story">
        <div class="text-center z-10 max-w-2xl mx-auto mt-8">
            <h2 class="text-3xl font-bold text-yellow-300 mb-4">La Historia de Abril y sus Amigos</h2>
            <div class="bg-white bg-opacity-90 rounded-xl p-6 shadow-lg">
                <div class="page-turn" id="story-page-1">
                    <div class="page-turn-inner">
                        <div class="story-container flex flex-col md:flex-row">
                            <div class="w-full md:w-1/2 pr-0 md:pr-4">
                                <div class="story-text text-lg text-blue-900 text-left mb-4">
                                    <p>En el viaje de la noche estrellada, acompañamos a Abril, una niña valiente en un viaje mágico por la Patagonia, donde aprende a enfrentar sus miedos nocturnos.</p>
                                    <p class="mt-2">Con la ayuda de un Águila sabia, un zorro y un cisne, Abril descubre que puede ser valiente incluso cuando está oscuro.</p>
                                </div>
                            </div>
                            <div class="w-full md:w-1/2">
                                <svg class="w-full" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="20" y="20" width="160" height="120" rx="5" fill="#E0E7FF" />
                                    <!-- Paisaje de la Patagonia -->
                                    <path d="M20,140 L60,80 L80,100 L120,60 L180,140" fill="#4B5563" />
                                    <rect x="20" y="140" width="160" height="20" fill="#047857" />
                                    <!-- Cielo estrellado -->
                                    <rect x="20" y="20" width="160" height="120" fill="#1E3A8A" opacity="0.7" />
                                    <circle cx="70" cy="60" r="3" fill="white" />
                                    <circle cx="50" cy="40" r="2" fill="white" />
                                    <circle cx="90" cy="70" r="2" fill="white" />
                                    <circle cx="40" cy="80" r="3" fill="white" />
                                    <circle cx="150" cy="50" r="2" fill="white" />
                                    <circle cx="170" cy="70" r="3" fill="white" />
                                    <circle cx="120" cy="40" r="2" fill="white" />
                                    <!-- Luna -->
                                    <circle cx="150" cy="70" r="15" fill="#FBBF24" />
                                </svg>
                            </div>
                        </div>
                        <button class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-1')">
                            Siguiente página
                        </button>
                    </div>
                </div>
                
                <div class="page-turn hidden" id="story-page-2">
                    <div class="page-turn-inner">
                        <div class="story-container flex flex-col md:flex-row">
                            <div class="w-full md:w-1/2 pr-0 md:pr-4">
                                <div class="story-text text-lg text-blue-900 text-left mb-4">
                                    <p>A través de técnicas sencillas como la respiración consciente, la visualización de paisajes tranquilos y el uso de una "piedra de la calma", Abril aprende a sentirse segura.</p>
                                    <p class="mt-2">El Águila sabia le enseña a respirar profundamente cuando siente miedo.</p>
                                </div>
                            </div>
                            <div class="w-full md:w-1/2 relative">
                                <div class="eagle-animation">
                                    <svg class="w-full" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                        <rect x="20" y="20" width="160" height="120" rx="5" fill="#E0E7FF" />
                                        <!-- Paisaje de la Patagonia -->
                                        <rect x="20" y="20" width="160" height="120" fill="#1E3A8A" opacity="0.5" />
                                        <path d="M20,140 L60,80 L80,100 L120,60 L180,140" fill="#4B5563" />
                                        <rect x="20" y="140" width="160" height="20" fill="#047857" />
                                        <!-- Águila -->
                                        <path d="M120,80 C140,60 160,70 150,90 C170,80 180,100 160,110 C180,120 170,140 150,130 C160,150 140,160 120,140" fill="#C4B5FD" />
                                        <path d="M120,80 L150,90 L160,110 L150,130 L120,140" fill="none" stroke="#8B5CF6" stroke-width="2" />
                                        <circle cx="135" cy="95" r="5" fill="#1E3A8A" />
                                        <path d="M125,115 Q135,120 145,115" fill="none" stroke="#1E3A8A" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-4 justify-center mt-4">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-2', 'back')">
                                Página anterior
                            </button>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-2')">
                                Siguiente página
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="page-turn hidden" id="story-page-3">
                    <div class="page-turn-inner">
                        <div class="story-container flex flex-col md:flex-row">
                            <div class="w-full md:w-1/2 pr-0 md:pr-4">
                                <div class="story-text text-lg text-blue-900 text-left mb-4">
                                    <p>El zorro astuto le muestra a Abril cómo visualizar lugares tranquilos cuando está asustada en su habitación.</p>
                                    <p class="mt-2">Y el cisne elegante le regala una piedra especial que puede sostener cuando necesita sentirse valiente.</p>
                                </div>
                            </div>
                            <div class="w-full md:w-1/2 relative">
                                <div class="fox-animation">
                                    <svg class="w-full" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                        <!-- Paisaje -->
                                        <rect x="20" y="20" width="160" height="120" rx="5" fill="#E0E7FF" />
                                        <rect x="20" y="140" width="160" height="20" fill="#047857" />
                                        <!-- Zorro -->
                                        <path d="M60,100 C80,80 120,80 140,100 L140,150 L60,150 Z" fill="#D35400" />
                                        <path d="M80,100 C90,80 110,80 120,100" fill="#D35400" />
                                        <path d="M85,90 L75,70 M115,90 L125,70" stroke="#D35400" stroke-width="3" />
                                        <circle cx="85" cy="95" r="4" fill="#000" />
                                        <circle cx="115" cy="95" r="4" fill="#000" />
                                        <path d="M90,115 Q100,125 110,115" fill="none" stroke="#000" stroke-width="2" />
                                        <path d="M140,120 C160,100 180,120 160,150" fill="#D35400" />
                                        <!-- Piedra de la calma -->
                                        <path d="M50,130 Q60,120 70,130 Q80,140 70,145 Q60,150 50,145 Q40,140 50,130" fill="#A78BFA" class="stone-glow" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-4 justify-center mt-4">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-3', 'back')">
                                Página anterior
                            </button>
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-3')">
                                Siguiente página
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="page-turn hidden" id="story-page-4">
                    <div class="page-turn-inner">
                        <div class="story-container flex flex-col md:flex-row">
                            <div class="w-full md:w-1/2 pr-0 md:pr-4">
                                <div class="story-text text-lg text-blue-900 text-left mb-4">
                                    <p>Este cuento no solo es una herramienta para gestionar el miedo, sino también una invitación a fortalecer el apego seguro y la independencia emocional.</p>
                                    <p class="mt-2">Antes de comenzar, te animamos a buscar una "piedra de la calma" para que tengas un recordatorio tangible de tu valentía.</p>
                                </div>
                            </div>
                            <div class="w-full md:w-1/2">
                                <svg class="w-full" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="20" y="20" width="160" height="120" rx="5" fill="#E0E7FF" />
                                    <!-- Niña durmiendo tranquila -->
                                    <rect x="40" y="60" width="120" height="60" fill="#FEF3C7" />
                                    <path d="M60,80 Q100,60 140,80 Q150,120 100,120 Q50,120 60,80" fill="#FFFFFF" />
                                    <path d="M90,90 Q100,95 110,90" fill="none" stroke="#1E3A8A" stroke-width="1" />
                                    <path d="M85,85 C85,84 85,83 86,83" stroke="#1E3A8A" stroke-width="1" />
                                    <path d="M115,85 C115,84 115,83 114,83" stroke="#1E3A8A" stroke-width="1" />
                                    <!-- Piedra de la calma -->
                                    <path d="M150,100 Q160,90 170,100 Q180,110 170,115 Q160,120 150,115 Q140,110 150,100" fill="#A78BFA" class="stone-glow" />
                                </svg>
                            </div>
                        </div>
                        <div class="flex flex-col space-y-4 mt-4">
                            <div class="flex space-x-4 justify-center">
                                <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="flipStoryPage('story-page-4', 'back')">
                                    Página anterior
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full" onclick="showPage('page-breathing')">
                                    Continuar
                                </button>
                            </div>
                            
                            <!-- Botón de información -->
                            <a href="https://editorialemocionarte.systeme.io/33bd59d3" target="_blank" class="info-button text-white font-bold py-2 px-4 rounded-full text-md inline-flex items-center justify-center mt-4">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                Para obtener más información de estas herramientas entra aquí
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Página de juego de respiración -->
    <div class="page flex flex-col items-center justify-between min-h-screen p-4" id="page-breathing">
        <div class="text-center z-10">
            <h2 class="text-3xl font-bold text-yellow-300 mb-4">Respiración Consciente</h2>
            <p class="text-xl mb-6">Respira junto con el círculo como te enseñó el Águila</p>
        </div>
        
        <div class="flex flex-col items-center justify-center flex-grow">
            <div class="relative w-64 h-64 md:w-80 md:h-80">
                <!-- Círculo de respiración -->
                <div class="absolute inset-0 flex items-center justify-center">
                    <div id="breath-circle" class="w-40 h-40 md:w-48 md:h-48 bg-blue-400 rounded-full flex items-center justify-center transition-all duration-500 ease-in-out">
                        <span id="breath-text" class="text-white text-xl font-bold">Preparado</span>
                    </div>
                </div>
                
                <!-- Anillo de progreso -->
                <svg class="progress-ring absolute inset-0 w-full h-full" viewBox="0 0 100 100">
                    <circle
                        id="progress-background"
                        cx="50"
                        cy="50"
                        r="45"
                        fill="transparent"
                        stroke="#CBD5E0"
                        stroke-width="3"
                    ></circle>
                    <circle
                        id="progress-ring-circle"
                        cx="50"
                        cy="50"
                        r="45"
                        fill="transparent"
                        stroke="#3B82F6"
                        stroke-width="5"
                        stroke-dasharray="282.74"
                        stroke-dashoffset="282.74"
                    ></circle>
                </svg>
                
                <!-- Contador -->
                <div class="absolute bottom-0 left-0 right-0 text-center">
                    <span id="breath-counter" class="text-2xl font-bold text-white">0</span>
                </div>
            </div>
            
            <div class="mt-8">
                <button id="start-breathing" onclick="startBreathingExercise()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-full text-lg">
                    Comenzar
                </button>
                <button id="stop-breathing" onclick="stopBreathingExercise()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-full text-lg hidden">
                    Detener
                </button>
            </div>
        </div>
        
        <div class="mt-6 mb-4 flex flex-col space-y-4">
            <button onclick="showPage('page-shapes')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full">
                Continuar
            </button>
            
            <!-- Botón de información -->
            <a href="https://editorialemocionarte.systeme.io/33bd59d3" target="_blank" class="info-button text-white font-bold py-2 px-4 rounded-full text-md inline-flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Para obtener más información de estas herramientas entra aquí
            </a>
        </div>
    </div>

    <!-- Página de juego de formas -->
    <div class="page flex flex-col items-center justify-between min-h-screen p-4" id="page-shapes">
        <div class="text-center z-10">
            <h2 class="text-3xl font-bold text-yellow-300 mb-4">Juego de Formas</h2>
            <p class="text-xl mb-6">Arrastra cada forma a su lugar correcto</p>
        </div>
        
        <div class="flex flex-col md:flex-row justify-center items-center w-full max-w-4xl mx-auto flex-grow">
            <div class="shapes-container flex flex-wrap justify-center gap-6 mb-8 md:mb-0 md:w-1/2">
                <div class="shape" id="circle" draggable="true" data-shape="circle">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <circle cx="40" cy="40" r="35" fill="#FCD34D" stroke="#FCD34D" stroke-width="2" />
                    </svg>
                </div>
                <div class="shape" id="square" draggable="true" data-shape="square">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <rect x="5" y="5" width="70" height="70" fill="#60A5FA" stroke="#60A5FA" stroke-width="2" />
                    </svg>
                </div>
                <div class="shape" id="triangle" draggable="true" data-shape="triangle">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <polygon points="40,5 75,75 5,75" fill="#34D399" stroke="#34D399" stroke-width="2" />
                    </svg>
                </div>
                <div class="shape" id="star" draggable="true" data-shape="star">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <polygon points="40,5 50,30 75,30 55,45 65,70 40,55 15,70 25,45 5,30 30,30" fill="#F472B6" stroke="#F472B6" stroke-width="2" />
                    </svg>
                </div>
                <div class="shape" id="heart" draggable="true" data-shape="heart">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <path d="M40,70 C60,55 75,40 75,25 C75,15 65,5 55,5 C45,5 40,15 40,15 C40,15 35,5 25,5 C15,5 5,15 5,25 C5,40 20,55 40,70 Z" fill="#EF4444" stroke="#EF4444" stroke-width="2" />
                    </svg>
                </div>
                <div class="shape" id="diamond" draggable="true" data-shape="diamond">
                    <svg width="80" height="80" viewBox="0 0 80 80">
                        <polygon points="40,5 75,40 40,75 5,40" fill="#A78BFA" stroke="#A78BFA" stroke-width="2" />
                    </svg>
                </div>
            </div>
            
            <div class="targets-container grid grid-cols-2 gap-4 md:w-1/2">
                <div class="target-area flex flex-col items-center" data-shape="circle">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Círculo</p>
                </div>
                <div class="target-area flex flex-col items-center" data-shape="square">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <rect x="5" y="5" width="90" height="90" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Cuadrado</p>
                </div>
                <div class="target-area flex flex-col items-center" data-shape="triangle">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <polygon points="50,5 95,95 5,95" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Triángulo</p>
                </div>
                <div class="target-area flex flex-col items-center" data-shape="star">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <polygon points="50,5 63,35 95,35 70,55 80,85 50,70 20,85 30,55 5,35 37,35" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Estrella</p>
                </div>
                <div class="target-area flex flex-col items-center" data-shape="heart">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <path d="M50,90 C75,70 95,50 95,30 C95,15 80,5 65,5 C55,5 50,15 50,15 C50,15 45,5 35,5 C20,5 5,15 5,30 C5,50 25,70 50,90 Z" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Corazón</p>
                </div>
                <div class="target-area flex flex-col items-center" data-shape="diamond">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <polygon points="50,5 95,50 50,95 5,50" fill="none" stroke="white" stroke-width="3" stroke-dasharray="10,5" />
                    </svg>
                    <p class="mt-2 text-lg">Diamante</p>
                </div>
            </div>
        </div>
        
        <div class="mt-6 mb-4 flex flex-col space-y-4">
            <button onclick="showPage('page-stars')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full">
                Continuar
            </button>
            
            <!-- Botón de información -->
            <a href="https://editorialemocionarte.systeme.io/33bd59d3" target="_blank" class="info-button text-white font-bold py-2 px-4 rounded-full text-md inline-flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Para obtener más información de estas herramientas entra aquí
            </a>
        </div>
    </div>

    <!-- Página de estrellas con mensajes -->
    <div class="page flex flex-col items-center justify-between min-h-screen p-4 relative" id="page-stars">
        <div class="text-center z-10">
            <h2 class="text-3xl font-bold text-yellow-300 mb-4">Estrellas de Mensajes</h2>
            <p class="text-xl mb-6">Toca las estrellas para descubrir mensajes especiales</p>
        </div>
        
        <div class="stars-container flex-grow flex flex-wrap justify-center items-center gap-8 md:gap-16 w-full max-w-4xl">
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(0)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(1)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(2)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(3)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(4)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(5)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
            <svg class="star w-16 h-16 md:w-24 md:h-24" viewBox="0 0 24 24" onclick="showStarMessage(6)">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="#FFD700" />
            </svg>
        </div>
        
        <div class="mt-6 mb-4 flex flex-col space-y-4">
            <button onclick="showPage('page-home')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full">
                Volver al inicio
            </button>
            
            <!-- Botón de información -->
            <a href="https://editorialemocionarte.systeme.io/33bd59d3" target="_blank" class="info-button text-white font-bold py-2 px-4 rounded-full text-md inline-flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Para obtener más información de estas herramientas entra aquí
            </a>
        </div>
        
        <!-- Fondo de cielo nocturno -->
        <div class="absolute inset-0 -z-10 overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-b from-blue-900 to-purple-900"></div>
            <div class="absolute inset-0">
                <svg width="100%" height="100%">
                    <circle cx="10%" cy="20%" r="1" fill="white" opacity="0.8" />
                    <circle cx="25%" cy="15%" r="1.5" fill="white" opacity="0.7" />
                    <circle cx="40%" cy="10%" r="1" fill="white" opacity="0.8" />
                    <circle cx="55%" cy="25%" r="1.2" fill="white" opacity="0.7" />
                    <circle cx="70%" cy="5%" r="1" fill="white" opacity="0.8" />
                    <circle cx="85%" cy="30%" r="1.5" fill="white" opacity="0.7" />
                    <circle cx="95%" cy="15%" r="1" fill="white" opacity="0.8" />
                    <circle cx="5%" cy="45%" r="1.2" fill="white" opacity="0.7" />
                    <circle cx="20%" cy="35%" r="1" fill="white" opacity="0.8" />
                    <circle cx="35%" cy="50%" r="1.5" fill="white" opacity="0.7" />
                    <circle cx="50%" cy="40%" r="1" fill="white" opacity="0.8" />
                    <circle cx="65%" cy="55%" r="1.2" fill="white" opacity="0.7" />
                    <circle cx="80%" cy="45%" r="1" fill="white" opacity="0.8" />
                    <circle cx="90%" cy="60%" r="1.5" fill="white" opacity="0.7" />
                    <circle cx="15%" cy="65%" r="1" fill="white" opacity="0.8" />
                    <circle cx="30%" cy="75%" r="1.2" fill="white" opacity="0.7" />
                    <circle cx="45%" cy="70%" r="1" fill="white" opacity="0.8" />
                    <circle cx="60%" cy="80%" r="1.5" fill="white" opacity="0.7" />
                    <circle cx="75%" cy="85%" r="1" fill="white" opacity="0.8" />
                    <circle cx="85%" cy="90%" r="1.2" fill="white" opacity="0.7" />
                </svg>
            </div>
        </div>
    </div>

    <script>
        // Mensajes de las estrellas
        const starMessages = [
            "Eres valiente y fuerte",
            "Puedes superar cualquier desafío",
            "Confía en ti mismo/a",
            "Eres especial y único/a",
            "Estás rodeado/a de amor",
            "Tus sueños son importantes",
            "Brillas con luz propia"
        ];
        
        // Función para mostrar una página específica
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            // Si estamos saliendo de la página de respiración, detener el ejercicio
            if (breathingInterval) {
                stopBreathingExercise();
            }
        }
        
        // Función para mostrar mensajes de las estrellas
        function showStarMessage(index) {
            const messagePopup = document.getElementById('message-popup');
            const messageText = document.getElementById('message-text');
            messageText.textContent = starMessages[index];
            messagePopup.style.display = 'block';
            
            // Crear confeti
            createConfetti();
        }
        
        // Función para cerrar el mensaje
        function closeMessage() {
            document.getElementById('message-popup').style.display = 'none';
        }
        
        // Función para crear confeti
        function createConfetti() {
            const confettiContainer = document.body;
            const colors = ['#FCD34D', '#60A5FA', '#34D399', '#F472B6', '#EF4444', '#A78BFA'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
                confettiContainer.appendChild(confetti);
                
                // Eliminar el confeti después de la animación
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }
        
        // Función para cambiar páginas en la historia
        function flipStoryPage(currentPageId, direction = 'forward') {
            const currentPage = document.getElementById(currentPageId);
            let nextPageId;
            
            if (direction === 'forward') {
                const pageNumber = parseInt(currentPageId.split('-')[2]);
                nextPageId = 'story-page-' + (pageNumber + 1);
            } else {
                const pageNumber = parseInt(currentPageId.split('-')[2]);
                nextPageId = 'story-page-' + (pageNumber - 1);
            }
            
            const nextPage = document.getElementById(nextPageId);
            
            if (nextPage) {
                currentPage.classList.add('hidden');
                nextPage.classList.remove('hidden');
            }
        }
        
        // Variables para el ejercicio de respiración
        let breathingInterval;
        let breathingPhase = 'ready';
        let breathingCounter = 0;
        let breathingCycle = 0;
        
        // Función para iniciar el ejercicio de respiración
        function startBreathingExercise() {
            const breathCircle = document.getElementById('breath-circle');
            const breathText = document.getElementById('breath-text');
            const breathCounter = document.getElementById('breath-counter');
            const progressRing = document.getElementById('progress-ring-circle');
            const startButton = document.getElementById('start-breathing');
            const stopButton = document.getElementById('stop-breathing');
            
            // Cambiar botones
            startButton.classList.add('hidden');
            stopButton.classList.remove('hidden');
            
            // Reiniciar contadores
            breathingPhase = 'inhale';
            breathingCounter = 0;
            breathingCycle = 0;
            
            // Iniciar el intervalo de respiración
            breathingInterval = setInterval(() => {
                const circumference = 2 * Math.PI * 45;
                
                if (breathingPhase === 'inhale') {
                    // Fase de inhalación (4 segundos)
                    breathCircle.style.transform = 'scale(1.5)';
                    breathText.textContent = 'Inhala';
                    breathCounter.textContent = breathingCounter + 1;
                    
                    // Actualizar el anillo de progreso
                    const progress = (breathingCounter / 4) * circumference;
                    progressRing.style.stroke = '#3B82F6';
                    progressRing.style.strokeDashoffset = circumference - progress;
                    
                    breathingCounter++;
                    if (breathingCounter >= 4) {
                        breathingPhase = 'hold';
                        breathingCounter = 0;
                    }
                } else if (breathingPhase === 'hold') {
                    // Fase de retención (4 segundos)
                    breathText.textContent = 'Retén';
                    breathCounter.textContent = breathingCounter + 1;
                    
                    // Actualizar el anillo de progreso
                    const progress = (breathingCounter / 4) * circumference;
                    progressRing.style.stroke = '#8B5CF6';
                    progressRing.style.strokeDashoffset = circumference - progress;
                    
                    breathingCounter++;
                    if (breathingCounter >= 4) {
                        breathingPhase = 'exhale';
                        breathingCounter = 0;
                    }
                } else if (breathingPhase === 'exhale') {
                    // Fase de exhalación (6 segundos)
                    breathCircle.style.transform = 'scale(1)';
                    breathText.textContent = 'Exhala';
                    breathCounter.textContent = breathingCounter + 1;
                    
                    // Actualizar el anillo de progreso
                    const progress = (breathingCounter / 6) * circumference;
                    progressRing.style.stroke = '#10B981';
                    progressRing.style.strokeDashoffset = circumference - progress;
                    
                    breathingCounter++;
                    if (breathingCounter >= 6) {
                        breathingPhase = 'inhale';
                        breathingCounter = 0;
                        breathingCycle++;
                    }
                }
            }, 1000);
        }
        
        // Función para detener el ejercicio de respiración
        function stopBreathingExercise() {
            if (breathingInterval) {
                clearInterval(breathingInterval);
                breathingInterval = null;
                
                // Restablecer elementos
                const breathCircle = document.getElementById('breath-circle');
                const breathText = document.getElementById('breath-text');
                const breathCounter = document.getElementById('breath-counter');
                const progressRing = document.getElementById('progress-ring-circle');
                const startButton = document.getElementById('start-breathing');
                const stopButton = document.getElementById('stop-breathing');
                
                breathCircle.style.transform = 'scale(1)';
                breathText.textContent = 'Preparado';
                breathCounter.textContent = '0';
                progressRing.style.strokeDashoffset = 2 * Math.PI * 45;
                
                // Cambiar botones
                startButton.classList.remove('hidden');
                stopButton.classList.add('hidden');
            }
        }
        
        // Configuración del juego de formas
        document.addEventListener('DOMContentLoaded', function() {
            const shapes = document.querySelectorAll('.shape');
            const targetAreas = document.querySelectorAll('.target-area');
            let draggedShape = null;
            
            // Configurar eventos de arrastrar y soltar para formas
            shapes.forEach(shape => {
                shape.addEventListener('dragstart', function(e) {
                    draggedShape = this;
                    this.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', this.dataset.shape);
                });
                
                shape.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
                
                // Soporte para dispositivos táctiles
                shape.addEventListener('touchstart', function(e) {
                    draggedShape = this;
                    this.classList.add('dragging');
                }, {passive: false});
                
                shape.addEventListener('touchend', function() {
                    this.classList.remove('dragging');
                });
                
                shape.addEventListener('touchmove', function(e) {
                    e.preventDefault();
                    const touch = e.targetTouches[0];
                    const x = touch.clientX;
                    const y = touch.clientY;
                    
                    // Mover la forma con el dedo
                    this.style.position = 'absolute';
                    this.style.left = x - 40 + 'px';
                    this.style.top = y - 40 + 'px';
                    
                    // Comprobar si está sobre un área objetivo
                    const elementsAtPoint = document.elementsFromPoint(x, y);
                    let targetArea = null;
                    
                    for (let i = 0; i < elementsAtPoint.length; i++) {
                        if (elementsAtPoint[i].classList.contains('target-area')) {
                            targetArea = elementsAtPoint[i];
                            break;
                        }
                    }
                    
                    // Quitar resaltado de todas las áreas
                    targetAreas.forEach(area => {
                        area.classList.remove('highlight');
                    });
                    
                    // Resaltar el área objetivo si existe
                    if (targetArea) {
                        targetArea.classList.add('highlight');
                        
                        // Si se suelta sobre un área correcta
                        if (targetArea.dataset.shape === this.dataset.shape) {
                            targetArea.appendChild(this);
                            targetArea.classList.add('correct');
                            this.style.position = '';
                            this.style.left = '';
                            this.style.top = '';
                            this.style.margin = '0 auto';
                            this.setAttribute('draggable', 'false');
                            
                            // Verificar si todas las formas están en su lugar
                            checkAllShapesPlaced();
                        }
                    }
                }, {passive: false});
            });
            
            // Configurar eventos para áreas objetivo
            targetAreas.forEach(area => {
                area.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('highlight');
                });
                
                area.addEventListener('dragleave', function() {
                    this.classList.remove('highlight');
                });
                
                area.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('highlight');
                    
                    const shapeType = e.dataTransfer.getData('text/plain');
                    if (this.dataset.shape === shapeType) {
                        // Colocar la forma en el área objetivo
                        this.appendChild(draggedShape);
                        this.classList.add('correct');
                        draggedShape.style.margin = '0 auto';
                        draggedShape.style.position = '';
                        draggedShape.style.left = '';
                        draggedShape.style.top = '';
                        draggedShape.setAttribute('draggable', 'false');
                        
                        // Verificar si todas las formas están en su lugar
                        checkAllShapesPlaced();
                    }
                });
            });
            
            // Función para verificar si todas las formas están colocadas
            function checkAllShapesPlaced() {
                const allTargets = document.querySelectorAll('.target-area');
                let allPlaced = true;
                
                allTargets.forEach(target => {
                    if (!target.querySelector('.shape')) {
                        allPlaced = false;
                    }
                });
                
                if (allPlaced) {
                    setTimeout(() => {
                        alert('¡Felicidades! Has completado el juego de formas.');
                        createConfetti();
                    }, 500);
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9579810215dea29b',t:'MTc1MTI0Mjg5MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>